!function(){return function e(t,n,r){function o(l,s){if(!n[l]){if(!t[l]){var a="function"==typeof require&&require;if(!s&&a)return a(l,!0);if(i)return i(l,!0);var c=new Error("Cannot find module '"+l+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[l]={exports:{}};t[l][0].call(u.exports,function(e){return o(t[l][1][e]||e)},u,u.exports,e,t,n,r)}return n[l].exports}for(var i="function"==typeof require&&require,l=0;l<r.length;l++)o(r[l]);return o}}()({1:[function(e,t,n){t.exports=function(){const e={};let t=[];function n(){e.imageCount===e.imagesLoaded&&(t.forEach(e=>e()),t=[])}return e.imagesLoaded=0,e.imageCount=0,e.waitForLoad=function(){return new Promise(e=>{t.push(e),n()})},e.add=function(t,r){e.imageCount=e.imageCount+1;const o=new window.Image;return o.src=r,o.onload=(()=>{window.redraw&&window.redraw(),e.imagesLoaded=e.imagesLoaded+1,e[t]=o,n()}),o},e}},{}],2:[function(e,t,n){const r=e("events");t.exports=function(e){e.element.innerHTML="",e.element.style.position="absolute",e.element.style.width="100%",e.element.style.height="100%",e.element.style.overflow="hidden",e.zoomIntensity=e.zoomIntensity||.02,e.maximumScale=e.maximumScale||5,e.minimumScale=e.minimumScale||.5,e.fpsLimit=e.fpsLimit||50;const t={layers:[],lastArea:null,dirty:!0,previousDelta:0,worldX:e.worldX||0,worldY:e.worldY||0,scale:e.scale||1};function n(){t.layers.forEach(n=>{const{canvas:r,context:o}=n;r.width=e.element.offsetWidth,r.height=e.element.offsetHeight,o.clearRect(0,0,r.width,r.height),n.emit("move",t)})}function o(e){t.dragging=!1}function i(e){t.dragStartX=e.offsetX||e.touches[0].clientX,t.dragStartY=e.offsetY||e.touches[0].clientY,t.dragging=!0}function l(e){if(!e.offsetX&&!e.touched)return;const r=e.offsetX||e.touches[0].clientX,o=e.offsetY||e.touches[0].clientY;t.dragging?(t.worldX=t.worldX-(t.dragStartX-r)*t.scale,t.worldY=t.worldY-(t.dragStartY-o)*t.scale,t.dragStartX=r,t.dragStartY=o,n()):t.layers.forEach(e=>{e.emit("hover",{x:-1*t.worldX+r*t.scale,y:-1*t.worldY+o*t.scale},t)})}return document.addEventListener("wheel",function(r){const o=r.offsetX,i=r.offsetY,l=r.deltaY<0?1:-1;let s=Math.exp(l*e.zoomIntensity);s=t.scale*s>e.maximumScale?1:s,s=(s=t.scale*s<e.minimumScale?1:s).toFixed(5);const a=t.scale*s,c=t.scale-a;t.worldX=t.worldX-o*c,t.worldY=t.worldY-i*c,t.scale*=s,n()}),document.addEventListener("touchend",o),e.element.addEventListener("touchstart",i),document.addEventListener("touchmove",l),document.addEventListener("mouseup",o),e.element.addEventListener("mousedown",i),document.addEventListener("mousemove",l),{createLayer:function(){const o=document.createElement("canvas");o.style.position="absolute";const i=o.getContext("2d");e.element.appendChild(o);const l=new r;return l.canvas=o,l.context=i,t.layers.push(l),l.clear=function({canvas:e,context:t}){return()=>{t.clearRect(0,0,e.width,e.height)}}({canvas:o,context:i,eventListener:l}),l.drawImage=function({canvas:e,context:n}){return(e,r,o,i,l)=>{e=t.worldX+e,r=t.worldY+r,n.drawImage(l,Math.ceil(e/t.scale),Math.ceil(r/t.scale),Math.ceil(o/t.scale),Math.ceil(i/t.scale))}}({canvas:o,context:i,eventListener:l}),l.fillText=function({canvas:e,context:n}){return(e,r,o)=>{r=t.worldX+r,o=t.worldY+o,n.fillText(e,Math.ceil(r/t.scale),Math.ceil(o/t.scale))}}({canvas:o,context:i,eventListener:l}),Object.defineProperty(l,"font",{get:function(e){return i.font},set:function(e){i.font=e}}),Object.defineProperty(l,"fillStyle",{get:function(e){return i.fillStyle},set:function(e){i.fillStyle=e}}),setTimeout(n),l}}}},{events:57}],3:[function(e,t,n){const r=e("mithril"),o=e("memoizee"),i=e("./createInficanvas"),l=e("./createAssetManager"),s=e("./proceduralGenerator"),a=l();a.add("grass","./img/grass.png"),a.add("forest","./img/forest.jpg"),a.add("ground","./img/ground.png"),a.add("dirt","./img/dirt.png"),a.add("water","./img/water.png"),a.add("home","./img/home.png");const c=o(function(e,t){const n=[];for(let o=0;o<10;o++){const i=[];for(let n=0;n<10;n++){const l=(r=s(e+o,t+n))<.1?a.water:r<.2?a.dirt:r<.8?a.grass:a.forest;i.push(l)}n.push(i)}var r;return n});function u(){return{oncreate:async e=>{const{cellWidth:t,cellHeight:n}=e.attrs;await a.waitForLoad();const r=e.dom,o=i({element:r}),l=o.createLayer(),s=o.createLayer();s.on("hover",function(e,r){const o=Math.floor(e.x/t),i=Math.floor(e.y/n);s.clear(),s.drawImage(o*t,i*n-n,2*t,2*n,a.home)}),l.on("move",function(e){const o=e.worldX/t*-1,i=e.worldY/n*-1,s=Math.floor(o),a=Math.floor(i),u=Math.ceil(r.offsetWidth/(t/e.scale))+2,f=Math.ceil(r.offsetHeight/(n/e.scale))+2;for(let e=s;e<s+u;e++)for(let r=a;r<a+f;r++){const o=Math.floor(e/10),i=10*Math.floor(r/10),s=10*o,a=e-s,u=r-i,f=c(i,s),p=e*t,d=r*n;l.drawImage(p,d,t,n,f[u][a])}})},view:()=>r("div","Initialising Grid")}}document.addEventListener("DOMContentLoaded",function(){r.mount(document.body,{view:()=>r("main",r("h1","Demo of Inficanvas"),r("p",(new Date).toString()),r("div",{class:"wrapper"},r(u,{cellWidth:50,cellHeight:50})))})}),window.m=r},{"./createAssetManager":1,"./createInficanvas":2,"./proceduralGenerator":115,memoizee:69,mithril:84}],4:[function(e,t,n){"use strict";var r=e("type/value/is"),o=e("type/plain-function/is"),i=e("es5-ext/object/assign"),l=e("es5-ext/object/normalize-options"),s=e("es5-ext/string/#/contains");(t.exports=function(e,t){var n,o,a,c,u;return arguments.length<2||"string"!=typeof e?(c=t,t=e,e=null):c=arguments[2],r(e)?(n=s.call(e,"c"),o=s.call(e,"e"),a=s.call(e,"w")):(n=a=!0,o=!1),u={value:t,configurable:n,enumerable:o,writable:a},c?i(l(c),u):u}).gs=function(e,t,n){var a,c,u,f;return"string"!=typeof e?(u=n,n=t,t=e,e=null):u=arguments[3],r(t)?o(t)?r(n)?o(n)||(u=n,n=void 0):n=void 0:(u=t,t=n=void 0):t=void 0,r(e)?(a=s.call(e,"c"),c=s.call(e,"e")):(a=!0,c=!1),f={get:t,set:n,configurable:a,enumerable:c},u?i(l(u),f):f}},{"es5-ext/object/assign":24,"es5-ext/object/normalize-options":36,"es5-ext/string/#/contains":43,"type/plain-function/is":111,"type/value/is":113}],5:[function(e,t,n){"use strict";var r=e("../../number/is-nan"),o=e("../../number/to-pos-integer"),i=e("../../object/valid-value"),l=Array.prototype.indexOf,s=Object.prototype.hasOwnProperty,a=Math.abs,c=Math.floor;t.exports=function(e){var t,n,u,f;if(!r(e))return l.apply(this,arguments);for(n=o(i(this).length),u=arguments[1],t=u=isNaN(u)?0:u>=0?c(u):o(this.length)-c(a(u));t<n;++t)if(s.call(this,t)&&(f=this[t],r(f)))return t;return-1}},{"../../number/is-nan":18,"../../number/to-pos-integer":22,"../../object/valid-value":39}],6:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?Array.from:e("./shim")},{"./is-implemented":7,"./shim":8}],7:[function(e,t,n){"use strict";t.exports=function(){var e,t,n=Array.from;return"function"==typeof n&&(t=n(e=["raz","dwa"]),Boolean(t&&t!==e&&"dwa"===t[1]))}},{}],8:[function(e,t,n){"use strict";var r=e("es6-symbol").iterator,o=e("../../function/is-arguments"),i=e("../../function/is-function"),l=e("../../number/to-pos-integer"),s=e("../../object/valid-callable"),a=e("../../object/valid-value"),c=e("../../object/is-value"),u=e("../../string/is-string"),f=Array.isArray,p=Function.prototype.call,d={configurable:!0,enumerable:!0,writable:!0,value:null},h=Object.defineProperty;t.exports=function(e){var t,n,m,v,y,g,b,x,w,j,_=arguments[1],O=arguments[2];if(e=Object(a(e)),c(_)&&s(_),this&&this!==Array&&i(this))t=this;else{if(!_){if(o(e))return 1!==(y=e.length)?Array.apply(null,e):((v=new Array(1))[0]=e[0],v);if(f(e)){for(v=new Array(y=e.length),n=0;n<y;++n)v[n]=e[n];return v}}v=[]}if(!f(e))if(void 0!==(w=e[r])){for(b=s(w).call(e),t&&(v=new t),x=b.next(),n=0;!x.done;)j=_?p.call(_,O,x.value,n):x.value,t?(d.value=j,h(v,n,d)):v[n]=j,x=b.next(),++n;y=n}else if(u(e)){for(y=e.length,t&&(v=new t),n=0,m=0;n<y;++n)j=e[n],n+1<y&&(g=j.charCodeAt(0))>=55296&&g<=56319&&(j+=e[++n]),j=_?p.call(_,O,j,m):j,t?(d.value=j,h(v,m,d)):v[m]=j,++m;y=m}if(void 0===y)for(y=l(e.length),t&&(v=new t(y)),n=0;n<y;++n)j=_?p.call(_,O,e[n],n):e[n],t?(d.value=j,h(v,n,d)):v[n]=j;return t&&(d.value=null,v.length=y),v}},{"../../function/is-arguments":12,"../../function/is-function":13,"../../number/to-pos-integer":22,"../../object/is-value":30,"../../object/valid-callable":38,"../../object/valid-value":39,"../../string/is-string":46,"es6-symbol":48}],9:[function(e,t,n){"use strict";var r=e("./from"),o=Array.isArray;t.exports=function(e){return o(e)?e:r(e)}},{"./from":6}],10:[function(e,t,n){"use strict";var r=e("../object/assign"),o=e("../object/is-object"),i=e("../object/is-value"),l=Error.captureStackTrace;t.exports=function(e){var n=new Error(e),s=arguments[1],a=arguments[2];return i(a)||o(s)&&(a=s,s=null),i(a)&&r(n,a),i(s)&&(n.code=s),l&&l(n,t.exports),n}},{"../object/assign":24,"../object/is-object":29,"../object/is-value":30}],11:[function(e,t,n){"use strict";var r,o,i,l,s,a=e("../number/to-pos-integer"),c=function(e,t){return t};try{Object.defineProperty(c,"length",{configurable:!0,writable:!1,enumerable:!1,value:1})}catch(e){}1===c.length?(r={configurable:!0,writable:!1,enumerable:!1},o=Object.defineProperty,t.exports=function(e,t){return t=a(t),e.length===t?e:(r.value=t,o(e,"length",r))}):(l=e("../object/mixin"),s=[],i=function(e){var t,n=0;if(s[e])return s[e];for(t=[];e--;)t.push("a"+(++n).toString(36));return new Function("fn","return function ("+t.join(", ")+") { return fn.apply(this, arguments); };")},t.exports=function(e,t){var n;if(t=a(t),e.length===t)return e;n=i(t)(e);try{l(n,e)}catch(e){}return n})},{"../number/to-pos-integer":22,"../object/mixin":35}],12:[function(e,t,n){"use strict";var r=Object.prototype.toString,o=r.call(function(){return arguments}());t.exports=function(e){return r.call(e)===o}},{}],13:[function(e,t,n){"use strict";var r=Object.prototype.toString,o=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);t.exports=function(e){return"function"==typeof e&&o(r.call(e))}},{}],14:[function(e,t,n){"use strict";t.exports=function(){}},{}],15:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?Math.sign:e("./shim")},{"./is-implemented":16,"./shim":17}],16:[function(e,t,n){"use strict";t.exports=function(){var e=Math.sign;return"function"==typeof e&&(1===e(10)&&-1===e(-20))}},{}],17:[function(e,t,n){"use strict";t.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:e>0?1:-1}},{}],18:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?Number.isNaN:e("./shim")},{"./is-implemented":19,"./shim":20}],19:[function(e,t,n){"use strict";t.exports=function(){var e=Number.isNaN;return"function"==typeof e&&(!e({})&&e(NaN)&&!e(34))}},{}],20:[function(e,t,n){"use strict";t.exports=function(e){return e!=e}},{}],21:[function(e,t,n){"use strict";var r=e("../math/sign"),o=Math.abs,i=Math.floor;t.exports=function(e){return isNaN(e)?0:0!==(e=Number(e))&&isFinite(e)?r(e)*i(o(e)):e}},{"../math/sign":15}],22:[function(e,t,n){"use strict";var r=e("./to-integer"),o=Math.max;t.exports=function(e){return o(0,r(e))}},{"./to-integer":21}],23:[function(e,t,n){"use strict";var r=e("./valid-callable"),o=e("./valid-value"),i=Function.prototype.bind,l=Function.prototype.call,s=Object.keys,a=Object.prototype.propertyIsEnumerable;t.exports=function(e,t){return function(n,c){var u,f=arguments[2],p=arguments[3];return n=Object(o(n)),r(c),u=s(n),p&&u.sort("function"==typeof p?i.call(p,n):void 0),"function"!=typeof e&&(e=u[e]),l.call(e,u,function(e,r){return a.call(n,e)?l.call(c,f,n[e],e,n,r):t})}}},{"./valid-callable":38,"./valid-value":39}],24:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?Object.assign:e("./shim")},{"./is-implemented":25,"./shim":26}],25:[function(e,t,n){"use strict";t.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},{}],26:[function(e,t,n){"use strict";var r=e("../keys"),o=e("../valid-value"),i=Math.max;t.exports=function(e,t){var n,l,s,a=i(arguments.length,2);for(e=Object(o(e)),s=function(r){try{e[r]=t[r]}catch(e){n||(n=e)}},l=1;l<a;++l)t=arguments[l],r(t).forEach(s);if(void 0!==n)throw n;return e}},{"../keys":31,"../valid-value":39}],27:[function(e,t,n){"use strict";t.exports=e("./_iterate")("forEach")},{"./_iterate":23}],28:[function(e,t,n){"use strict";t.exports=function(e){return"function"==typeof e}},{}],29:[function(e,t,n){"use strict";var r=e("./is-value"),o={function:!0,object:!0};t.exports=function(e){return r(e)&&o[typeof e]||!1}},{"./is-value":30}],30:[function(e,t,n){"use strict";var r=e("../function/noop")();t.exports=function(e){return e!==r&&null!==e}},{"../function/noop":14}],31:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?Object.keys:e("./shim")},{"./is-implemented":32,"./shim":33}],32:[function(e,t,n){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},{}],33:[function(e,t,n){"use strict";var r=e("../is-value"),o=Object.keys;t.exports=function(e){return o(r(e)?Object(e):e)}},{"../is-value":30}],34:[function(e,t,n){"use strict";var r=e("./valid-callable"),o=e("./for-each"),i=Function.prototype.call;t.exports=function(e,t){var n={},l=arguments[2];return r(t),o(e,function(e,r,o,s){n[r]=i.call(t,l,e,r,o,s)}),n}},{"./for-each":27,"./valid-callable":38}],35:[function(e,t,n){"use strict";var r=e("./valid-value"),o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,s=Object.getOwnPropertySymbols;t.exports=function(e,t){var n,a=Object(r(t));if(e=Object(r(e)),l(a).forEach(function(r){try{o(e,r,i(t,r))}catch(e){n=e}}),"function"==typeof s&&s(a).forEach(function(r){try{o(e,r,i(t,r))}catch(e){n=e}}),void 0!==n)throw n;return e}},{"./valid-value":39}],36:[function(e,t,n){"use strict";var r=e("./is-value"),o=Array.prototype.forEach,i=Object.create;t.exports=function(e){var t=i(null);return o.call(arguments,function(e){r(e)&&function(e,t){var n;for(n in e)t[n]=e[n]}(Object(e),t)}),t}},{"./is-value":30}],37:[function(e,t,n){"use strict";var r=Array.prototype.forEach,o=Object.create;t.exports=function(e){var t=o(null);return r.call(arguments,function(e){t[e]=!0}),t}},{}],38:[function(e,t,n){"use strict";t.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},{}],39:[function(e,t,n){"use strict";var r=e("./is-value");t.exports=function(e){if(!r(e))throw new TypeError("Cannot use null or undefined");return e}},{"./is-value":30}],40:[function(e,t,n){"use strict";var r=e("./valid-value"),o=e("./validate-stringifiable");t.exports=function(e){return o(r(e))}},{"./valid-value":39,"./validate-stringifiable":41}],41:[function(e,t,n){"use strict";var r=e("./is-callable");t.exports=function(e){try{return e&&r(e.toString)?e.toString():String(e)}catch(e){throw new TypeError("Passed argument cannot be stringifed")}}},{"./is-callable":28}],42:[function(e,t,n){"use strict";var r=e("./object/is-callable");t.exports=function(e){try{return e&&r(e.toString)?e.toString():String(e)}catch(e){return"<Non-coercible to string value>"}}},{"./object/is-callable":28}],43:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?String.prototype.contains:e("./shim")},{"./is-implemented":44,"./shim":45}],44:[function(e,t,n){"use strict";var r="razdwatrzy";t.exports=function(){return"function"==typeof r.contains&&(!0===r.contains("dwa")&&!1===r.contains("foo"))}},{}],45:[function(e,t,n){"use strict";var r=String.prototype.indexOf;t.exports=function(e){return r.call(this,e,arguments[1])>-1}},{}],46:[function(e,t,n){"use strict";var r=Object.prototype.toString,o=r.call("");t.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||r.call(e)===o)||!1}},{}],47:[function(e,t,n){"use strict";var r=e("./safe-to-string"),o=/[\n\r\u2028\u2029]/g;t.exports=function(e){var t=r(e);return t.length>100&&(t=t.slice(0,99)+"…"),t=t.replace(o,function(e){return JSON.stringify(e).slice(1,-1)})}},{"./safe-to-string":42}],48:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?e("ext/global-this").Symbol:e("./polyfill")},{"./is-implemented":49,"./polyfill":54,"ext/global-this":59}],49:[function(e,t,n){"use strict";var r=e("ext/global-this"),o={object:!0,symbol:!0};t.exports=function(){var e,t=r.Symbol;if("function"!=typeof t)return!1;e=t("test symbol");try{String(e)}catch(e){return!1}return!!o[typeof t.iterator]&&(!!o[typeof t.toPrimitive]&&!!o[typeof t.toStringTag])}},{"ext/global-this":59}],50:[function(e,t,n){"use strict";t.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&("Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag]))}},{}],51:[function(e,t,n){"use strict";var r=e("d"),o=Object.create,i=Object.defineProperty,l=Object.prototype,s=o(null);t.exports=function(e){for(var t,n,o=0;s[e+(o||"")];)++o;return s[e+=o||""]=!0,i(l,t="@@"+e,r.gs(null,function(e){n||(n=!0,i(this,t,r(e)),n=!1)})),t}},{d:4}],52:[function(e,t,n){"use strict";var r=e("d"),o=e("ext/global-this").Symbol;t.exports=function(e){return Object.defineProperties(e,{hasInstance:r("",o&&o.hasInstance||e("hasInstance")),isConcatSpreadable:r("",o&&o.isConcatSpreadable||e("isConcatSpreadable")),iterator:r("",o&&o.iterator||e("iterator")),match:r("",o&&o.match||e("match")),replace:r("",o&&o.replace||e("replace")),search:r("",o&&o.search||e("search")),species:r("",o&&o.species||e("species")),split:r("",o&&o.split||e("split")),toPrimitive:r("",o&&o.toPrimitive||e("toPrimitive")),toStringTag:r("",o&&o.toStringTag||e("toStringTag")),unscopables:r("",o&&o.unscopables||e("unscopables"))})}},{d:4,"ext/global-this":59}],53:[function(e,t,n){"use strict";var r=e("d"),o=e("../../../validate-symbol"),i=Object.create(null);t.exports=function(e){return Object.defineProperties(e,{for:r(function(t){return i[t]?i[t]:i[t]=e(String(t))}),keyFor:r(function(e){var t;for(t in o(e),i)if(i[t]===e)return t})})}},{"../../../validate-symbol":55,d:4}],54:[function(e,t,n){"use strict";var r,o,i,l=e("d"),s=e("./validate-symbol"),a=e("ext/global-this").Symbol,c=e("./lib/private/generate-name"),u=e("./lib/private/setup/standard-symbols"),f=e("./lib/private/setup/symbol-registry"),p=Object.create,d=Object.defineProperties,h=Object.defineProperty;if("function"==typeof a)try{String(a()),i=!0}catch(e){}else a=null;o=function(e){if(this instanceof o)throw new TypeError("Symbol is not a constructor");return r(e)},t.exports=r=function e(t){var n;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return i?a(t):(n=p(o.prototype),t=void 0===t?"":String(t),d(n,{__description__:l("",t),__name__:l("",c(t))}))},u(r),f(r),d(o.prototype,{constructor:l(r),toString:l("",function(){return this.__name__})}),d(r.prototype,{toString:l(function(){return"Symbol ("+s(this).__description__+")"}),valueOf:l(function(){return s(this)})}),h(r.prototype,r.toPrimitive,l("",function(){var e=s(this);return"symbol"==typeof e?e:e.toString()})),h(r.prototype,r.toStringTag,l("c","Symbol")),h(o.prototype,r.toStringTag,l("c",r.prototype[r.toStringTag])),h(o.prototype,r.toPrimitive,l("c",r.prototype[r.toPrimitive]))},{"./lib/private/generate-name":51,"./lib/private/setup/standard-symbols":52,"./lib/private/setup/symbol-registry":53,"./validate-symbol":55,d:4,"ext/global-this":59}],55:[function(e,t,n){"use strict";var r=e("./is-symbol");t.exports=function(e){if(!r(e))throw new TypeError(e+" is not a symbol");return e}},{"./is-symbol":50}],56:[function(e,t,n){"use strict";var r,o,i,l,s,a,c,u=e("d"),f=e("es5-ext/object/valid-callable"),p=Function.prototype.apply,d=Function.prototype.call,h=Object.create,m=Object.defineProperty,v=Object.defineProperties,y=Object.prototype.hasOwnProperty,g={configurable:!0,enumerable:!1,writable:!0};s={on:r=function(e,t){var n;return f(t),y.call(this,"__ee__")?n=this.__ee__:(n=g.value=h(null),m(this,"__ee__",g),g.value=null),n[e]?"object"==typeof n[e]?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},once:o=function(e,t){var n,o;return f(t),o=this,r.call(this,e,n=function(){i.call(o,e,n),p.call(t,this,arguments)}),n.__eeOnceListener__=t,this},off:i=function(e,t){var n,r,o,i;if(f(t),!y.call(this,"__ee__"))return this;if(!(n=this.__ee__)[e])return this;if("object"==typeof(r=n[e]))for(i=0;o=r[i];++i)o!==t&&o.__eeOnceListener__!==t||(2===r.length?n[e]=r[i?0:1]:r.splice(i,1));else r!==t&&r.__eeOnceListener__!==t||delete n[e];return this},emit:l=function(e){var t,n,r,o,i;if(y.call(this,"__ee__")&&(o=this.__ee__[e]))if("object"==typeof o){for(n=arguments.length,i=new Array(n-1),t=1;t<n;++t)i[t-1]=arguments[t];for(o=o.slice(),t=0;r=o[t];++t)p.call(r,this,i)}else switch(arguments.length){case 1:d.call(o,this);break;case 2:d.call(o,this,arguments[1]);break;case 3:d.call(o,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,i=new Array(n-1),t=1;t<n;++t)i[t-1]=arguments[t];p.call(o,this,i)}}},a={on:u(r),once:u(o),off:u(i),emit:u(l)},c=v({},a),t.exports=n=function(e){return null==e?h(c):v(Object(e),a)},n.methods=s},{d:4,"es5-ext/object/valid-callable":38}],57:[function(e,t,n){"use strict";var r,o="object"==typeof Reflect?Reflect:null,i=o&&"function"==typeof o.apply?o.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var l=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(e,t){return new Promise(function(n,r){function o(){void 0!==i&&e.removeListener("error",i),n([].slice.call(arguments))}var i;"error"!==t&&(i=function(n){e.removeListener(t,o),r(n)},e.once("error",i)),e.once(t,o)})},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var o,i,l,s;if(c(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),l=i[t]),void 0===l)l=i[t]=n,++e._eventsCount;else if("function"==typeof l?l=i[t]=r?[n,l]:[l,n]:r?l.unshift(n):l.push(n),(o=u(e))>0&&l.length>o&&!l.warned){l.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=l.length,s=a,console&&console.warn&&console.warn(s)}return e}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(r);return o.listener=n,r.wrapFn=o,o}function d(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):m(o,o.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||l(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||l(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var l;if(t.length>0&&(l=t[0]),l instanceof Error)throw l;var s=new Error("Unhandled error."+(l?" ("+l.message+")":""));throw s.context=l,s}var a=o[e];if(void 0===a)return!1;if("function"==typeof a)i(a,this,t);else{var c=a.length,u=m(a,c);for(n=0;n<c;++n)i(u[n],this,t)}return!0},s.prototype.addListener=function(e,t){return f(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return f(this,e,t,!0)},s.prototype.once=function(e,t){return c(t),this.on(e,p(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,p(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,o,i,l;if(c(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){l=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,l||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return d(this,e,!0)},s.prototype.rawListeners=function(e){return d(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},s.prototype.listenerCount=h,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},{}],58:[function(e,t,n){var r=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};t.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return r()}try{return __global__||r()}finally{delete Object.prototype.__global__}}()},{}],59:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?globalThis:e("./implementation")},{"./implementation":58,"./is-implemented":60}],60:[function(e,t,n){"use strict";t.exports=function(){return"object"==typeof globalThis&&(!!globalThis&&globalThis.Array===Array)}},{}],61:[function(e,t,n){function r(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}t.exports=r,t.exports.default=r},{}],62:[function(e,t,n){"use strict";var r=e("es5-ext/number/to-pos-integer"),o=Object.create,i=Object.prototype.hasOwnProperty;t.exports=function(e){var t,n=0,l=1,s=o(null),a=o(null),c=0;return e=r(e),{hit:function(r){var o=a[r],u=++c;if(s[u]=r,a[r]=u,!o){if(++n<=e)return;return r=s[l],t(r),r}if(delete s[o],l===o)for(;!i.call(s,++l);)continue},delete:t=function(e){var t=a[e];if(t&&(delete s[t],delete a[e],--n,l===t)){if(!n)return c=0,void(l=1);for(;!i.call(s,++l);)continue}},clear:function(){n=0,l=1,s=o(null),a=o(null),c=0}}}},{"es5-ext/number/to-pos-integer":22}],63:[function(e,t,n){"use strict";var r=e("es5-ext/array/from"),o=e("es5-ext/object/map"),i=e("es5-ext/object/mixin"),l=e("es5-ext/function/_define-length"),s=e("next-tick"),a=Array.prototype.slice,c=Function.prototype.apply,u=Object.create;e("../lib/registered-extensions").async=function(e,t){var n,f,p,d=u(null),h=u(null),m=t.memoized,v=t.original;t.memoized=l(function(e){var t=arguments,r=t[t.length-1];return"function"==typeof r&&(n=r,t=a.call(t,0,-1)),m.apply(f=this,p=t)},m);try{i(t.memoized,m)}catch(e){}t.on("get",function(e){var r,o,i;if(n){if(d[e])return"function"==typeof d[e]?d[e]=[d[e],n]:d[e].push(n),void(n=null);r=n,o=f,i=p,n=f=p=null,s(function(){var l;hasOwnProperty.call(h,e)?(l=h[e],t.emit("getasync",e,i,o),c.call(r,l.context,l.args)):(n=r,f=o,p=i,m.apply(o,i))})}}),t.original=function(){var e,o,i,l;return n?(e=r(arguments),o=function e(n){var o,i,a=e.id;if(null!=a){if(delete e.id,o=d[a],delete d[a],o)return i=r(arguments),t.has(a)&&(n?t.delete(a):(h[a]={context:this,args:i},t.emit("setasync",a,"function"==typeof o?1:o.length))),"function"==typeof o?l=c.call(o,this,i):o.forEach(function(e){l=c.call(e,this,i)},this),l}else s(c.bind(e,this,arguments))},i=n,n=f=p=null,e.push(o),l=c.call(v,this,e),o.cb=i,n=o,l):c.call(v,this,arguments)},t.on("set",function(e){n?(d[e]?"function"==typeof d[e]?d[e]=[d[e],n.cb]:d[e].push(n.cb):d[e]=n.cb,delete n.cb,n.id=e,n=null):t.delete(e)}),t.on("delete",function(e){var n;hasOwnProperty.call(d,e)||h[e]&&(n=h[e],delete h[e],t.emit("deleteasync",e,a.call(n.args,1)))}),t.on("clear",function(){var e=h;h=u(null),t.emit("clearasync",o(e,function(e){return a.call(e.args,1)}))})}},{"../lib/registered-extensions":71,"es5-ext/array/from":6,"es5-ext/function/_define-length":11,"es5-ext/object/map":34,"es5-ext/object/mixin":35,"next-tick":104}],64:[function(e,t,n){"use strict";var r=e("es5-ext/object/valid-callable"),o=e("es5-ext/object/for-each"),i=e("../lib/registered-extensions"),l=Function.prototype.apply;i.dispose=function(e,t,n){var s;if(r(e),n.async&&i.async||n.promise&&i.promise)return t.on("deleteasync",s=function(t,n){l.call(e,null,n)}),void t.on("clearasync",function(e){o(e,function(e,t){s(t,e)})});t.on("delete",s=function(t,n){e(n)}),t.on("clear",function(e){o(e,function(e,t){s(t,e)})})}},{"../lib/registered-extensions":71,"es5-ext/object/for-each":27,"es5-ext/object/valid-callable":38}],65:[function(e,t,n){"use strict";var r=e("es5-ext/array/from"),o=e("es5-ext/object/for-each"),i=e("next-tick"),l=e("is-promise"),s=e("timers-ext/valid-timeout"),a=e("../lib/registered-extensions"),c=Function.prototype,u=Math.max,f=Math.min,p=Object.create;a.maxAge=function(e,t,n){var d,h,m,v;(e=s(e))&&(d=p(null),h=n.async&&a.async||n.promise&&a.promise?"async":"",t.on("set"+h,function(n){d[n]=setTimeout(function(){t.delete(n)},e),"function"==typeof d[n].unref&&d[n].unref(),v&&(v[n]&&"nextTick"!==v[n]&&clearTimeout(v[n]),v[n]=setTimeout(function(){delete v[n]},m),"function"==typeof v[n].unref&&v[n].unref())}),t.on("delete"+h,function(e){clearTimeout(d[e]),delete d[e],v&&("nextTick"!==v[e]&&clearTimeout(v[e]),delete v[e])}),n.preFetch&&(m=!0===n.preFetch||isNaN(n.preFetch)?.333:u(f(Number(n.preFetch),1),0))&&(v={},m=(1-m)*e,t.on("get"+h,function(e,o,s){v[e]||(v[e]="nextTick",i(function(){var i;"nextTick"===v[e]&&(delete v[e],t.delete(e),n.async&&(o=r(o)).push(c),i=t.memoized.apply(s,o),n.promise&&l(i)&&("function"==typeof i.done?i.done(c,c):i.then(c,c)))}))})),t.on("clear"+h,function(){o(d,function(e){clearTimeout(e)}),d={},v&&(o(v,function(e){"nextTick"!==e&&clearTimeout(e)}),v={})}))}},{"../lib/registered-extensions":71,"es5-ext/array/from":6,"es5-ext/object/for-each":27,"is-promise":61,"next-tick":104,"timers-ext/valid-timeout":108}],66:[function(e,t,n){"use strict";var r=e("es5-ext/number/to-pos-integer"),o=e("lru-queue"),i=e("../lib/registered-extensions");i.max=function(e,t,n){var l,s,a;(e=r(e))&&(s=o(e),l=n.async&&i.async||n.promise&&i.promise?"async":"",t.on("set"+l,a=function(e){void 0!==(e=s.hit(e))&&t.delete(e)}),t.on("get"+l,a),t.on("delete"+l,s.delete),t.on("clear"+l,s.clear))}},{"../lib/registered-extensions":71,"es5-ext/number/to-pos-integer":22,"lru-queue":62}],67:[function(e,t,n){"use strict";var r=e("es5-ext/object/map"),o=e("es5-ext/object/primitive-set"),i=e("es5-ext/object/validate-stringifiable-value"),l=e("es5-ext/to-short-string-representation"),s=e("is-promise"),a=e("next-tick"),c=Object.create,u=o("then","then:finally","done","done:finally");e("../lib/registered-extensions").promise=function(e,t){var n=c(null),o=c(null),f=c(null);if(!0===e)e=null;else if(e=i(e),!u[e])throw new TypeError("'"+l(e)+"' is not valid promise mode");t.on("set",function(r,i,l){var c=!1;if(!s(l))return o[r]=l,void t.emit("setasync",r,1);n[r]=1,f[r]=l;var u=function(e){var i=n[r];if(c)throw new Error("Memoizee error: Detected unordered then|done & finally resolution, which in turn makes proper detection of success/failure impossible (when in 'done:finally' mode)\nConsider to rely on 'then' or 'done' mode instead.");i&&(delete n[r],o[r]=e,t.emit("setasync",r,i))},p=function(){c=!0,n[r]&&(delete n[r],delete f[r],t.delete(r))},d=e;if(d||(d="then"),"then"===d){var h=function(){a(p)};"function"==typeof(l=l.then(function(e){a(u.bind(this,e))},h)).finally&&l.finally(h)}else if("done"===d){if("function"!=typeof l.done)throw new Error("Memoizee error: Retrieved promise does not implement 'done' in 'done' mode");l.done(u,p)}else if("done:finally"===d){if("function"!=typeof l.done)throw new Error("Memoizee error: Retrieved promise does not implement 'done' in 'done:finally' mode");if("function"!=typeof l.finally)throw new Error("Memoizee error: Retrieved promise does not implement 'finally' in 'done:finally' mode");l.done(u),l.finally(p)}}),t.on("get",function(e,r,o){var i;if(n[e])++n[e];else{i=f[e];var l=function(){t.emit("getasync",e,r,o)};s(i)?"function"==typeof i.done?i.done(l):i.then(function(){a(l)}):l()}}),t.on("delete",function(e){if(delete f[e],n[e])delete n[e];else if(hasOwnProperty.call(o,e)){var r=o[e];delete o[e],t.emit("deleteasync",e,[r])}}),t.on("clear",function(){var e=o;o=c(null),n=c(null),f=c(null),t.emit("clearasync",r(e,function(e){return[e]}))})}},{"../lib/registered-extensions":71,"es5-ext/object/map":34,"es5-ext/object/primitive-set":37,"es5-ext/object/validate-stringifiable-value":40,"es5-ext/to-short-string-representation":47,"is-promise":61,"next-tick":104}],68:[function(e,t,n){"use strict";var r=e("d"),o=e("../lib/registered-extensions"),i=Object.create,l=Object.defineProperties;o.refCounter=function(e,t,n){var s,a;s=i(null),a=n.async&&o.async||n.promise&&o.promise?"async":"",t.on("set"+a,function(e,t){s[e]=t||1}),t.on("get"+a,function(e){++s[e]}),t.on("delete"+a,function(e){delete s[e]}),t.on("clear"+a,function(){s={}}),l(t.memoized,{deleteRef:r(function(){var e=t.get(arguments);return null===e?null:s[e]?!--s[e]&&(t.delete(e),!0):null}),getRefCount:r(function(){var e=t.get(arguments);return null===e?0:s[e]?s[e]:0})})}},{"../lib/registered-extensions":71,d:4}],69:[function(e,t,n){"use strict";var r=e("es5-ext/object/normalize-options"),o=e("./lib/resolve-length"),i=e("./plain");t.exports=function(t){var n,l=r(arguments[1]);return l.normalizer||0!==(n=l.length=o(l.length,t.length,l.async))&&(l.primitive?!1===n?l.normalizer=e("./normalizers/primitive"):n>1&&(l.normalizer=e("./normalizers/get-primitive-fixed")(n)):l.normalizer=!1===n?e("./normalizers/get")():1===n?e("./normalizers/get-1")():e("./normalizers/get-fixed")(n)),l.async&&e("./ext/async"),l.promise&&e("./ext/promise"),l.dispose&&e("./ext/dispose"),l.maxAge&&e("./ext/max-age"),l.max&&e("./ext/max"),l.refCounter&&e("./ext/ref-counter"),i(t,l)}},{"./ext/async":63,"./ext/dispose":64,"./ext/max":66,"./ext/max-age":65,"./ext/promise":67,"./ext/ref-counter":68,"./lib/resolve-length":72,"./normalizers/get":78,"./normalizers/get-1":75,"./normalizers/get-fixed":76,"./normalizers/get-primitive-fixed":77,"./normalizers/primitive":79,"./plain":80,"es5-ext/object/normalize-options":36}],70:[function(e,t,n){"use strict";var r=e("es5-ext/error/custom"),o=e("es5-ext/function/_define-length"),i=e("d"),l=e("event-emitter").methods,s=e("./resolve-resolve"),a=e("./resolve-normalize"),c=Function.prototype.apply,u=Function.prototype.call,f=Object.create,p=Object.defineProperties,d=l.on,h=l.emit;t.exports=function(e,t,n){var l,m,v,y,g,b,x,w,j,_,O,T,S,E,k,L=f(null);return m=!1!==t?t:isNaN(e.length)?1:e.length,n.normalizer&&(_=a(n.normalizer),v=_.get,y=_.set,g=_.delete,b=_.clear),null!=n.resolvers&&(k=s(n.resolvers)),E=v?o(function(t){var n,o,i=arguments;if(k&&(i=k(i)),null!==(n=v(i))&&hasOwnProperty.call(L,n))return O&&l.emit("get",n,i,this),L[n];if(o=1===i.length?u.call(e,this,i[0]):c.call(e,this,i),null===n){if(null!==(n=v(i)))throw r("Circular invocation","CIRCULAR_INVOCATION");n=y(i)}else if(hasOwnProperty.call(L,n))throw r("Circular invocation","CIRCULAR_INVOCATION");return L[n]=o,T&&l.emit("set",n,null,o),o},m):0===t?function(){var t;if(hasOwnProperty.call(L,"data"))return O&&l.emit("get","data",arguments,this),L.data;if(t=arguments.length?c.call(e,this,arguments):u.call(e,this),hasOwnProperty.call(L,"data"))throw r("Circular invocation","CIRCULAR_INVOCATION");return L.data=t,T&&l.emit("set","data",null,t),t}:function(t){var n,o,i=arguments;if(k&&(i=k(arguments)),o=String(i[0]),hasOwnProperty.call(L,o))return O&&l.emit("get",o,i,this),L[o];if(n=1===i.length?u.call(e,this,i[0]):c.call(e,this,i),hasOwnProperty.call(L,o))throw r("Circular invocation","CIRCULAR_INVOCATION");return L[o]=n,T&&l.emit("set",o,null,n),n},l={original:e,memoized:E,profileName:n.profileName,get:function(e){return k&&(e=k(e)),v?v(e):String(e[0])},has:function(e){return hasOwnProperty.call(L,e)},delete:function(e){var t;hasOwnProperty.call(L,e)&&(g&&g(e),t=L[e],delete L[e],S&&l.emit("delete",e,t))},clear:function(){var e=L;b&&b(),L=f(null),l.emit("clear",e)},on:function(e,t){return"get"===e?O=!0:"set"===e?T=!0:"delete"===e&&(S=!0),d.call(this,e,t)},emit:h,updateEnv:function(){e=l.original}},x=v?o(function(e){var t,n=arguments;k&&(n=k(n)),null!==(t=v(n))&&l.delete(t)},m):0===t?function(){return l.delete("data")}:function(e){return k&&(e=k(arguments)[0]),l.delete(e)},w=o(function(){var e,n=arguments;return 0===t?L.data:(k&&(n=k(n)),e=v?v(n):String(n[0]),L[e])}),j=o(function(){var e,n=arguments;return 0===t?l.has("data"):(k&&(n=k(n)),null!==(e=v?v(n):String(n[0]))&&l.has(e))}),p(E,{__memoized__:i(!0),delete:i(x),clear:i(l.clear),_get:i(w),_has:i(j)}),l}},{"./resolve-normalize":73,"./resolve-resolve":74,d:4,"es5-ext/error/custom":10,"es5-ext/function/_define-length":11,"event-emitter":56}],71:[function(e,t,n){"use strict"},{}],72:[function(e,t,n){"use strict";var r=e("es5-ext/number/to-pos-integer");t.exports=function(e,t,n){var o;return isNaN(e)?(o=t)>=0?n&&o?o-1:o:1:!1!==e&&r(e)}},{"es5-ext/number/to-pos-integer":22}],73:[function(e,t,n){"use strict";var r=e("es5-ext/object/valid-callable");t.exports=function(e){var t;return"function"==typeof e?{set:e,get:e}:(t={get:r(e.get)},void 0!==e.set?(t.set=r(e.set),e.delete&&(t.delete=r(e.delete)),e.clear&&(t.clear=r(e.clear)),t):(t.set=t.get,t))}},{"es5-ext/object/valid-callable":38}],74:[function(e,t,n){"use strict";var r,o=e("es5-ext/array/to-array"),i=e("es5-ext/object/is-value"),l=e("es5-ext/object/valid-callable"),s=Array.prototype.slice;r=function(e){return this.map(function(t,n){return t?t(e[n]):e[n]}).concat(s.call(e,this.length))},t.exports=function(e){return(e=o(e)).forEach(function(e){i(e)&&l(e)}),r.bind(e)}},{"es5-ext/array/to-array":9,"es5-ext/object/is-value":30,"es5-ext/object/valid-callable":38}],75:[function(e,t,n){"use strict";var r=e("es5-ext/array/#/e-index-of");t.exports=function(){var e=0,t=[],n=[];return{get:function(e){var o=r.call(t,e[0]);return-1===o?null:n[o]},set:function(r){return t.push(r[0]),n.push(++e),e},delete:function(e){var o=r.call(n,e);-1!==o&&(t.splice(o,1),n.splice(o,1))},clear:function(){t=[],n=[]}}}},{"es5-ext/array/#/e-index-of":5}],76:[function(e,t,n){"use strict";var r=e("es5-ext/array/#/e-index-of"),o=Object.create;t.exports=function(e){var t=0,n=[[],[]],i=o(null);return{get:function(t){for(var o,i=0,l=n;i<e-1;){if(-1===(o=r.call(l[0],t[i])))return null;l=l[1][o],++i}return-1===(o=r.call(l[0],t[i]))?null:l[1][o]||null},set:function(o){for(var l,s=0,a=n;s<e-1;)-1===(l=r.call(a[0],o[s]))&&(l=a[0].push(o[s])-1,a[1].push([[],[]])),a=a[1][l],++s;return-1===(l=r.call(a[0],o[s]))&&(l=a[0].push(o[s])-1),a[1][l]=++t,i[t]=o,t},delete:function(t){for(var o,l=0,s=n,a=[],c=i[t];l<e-1;){if(-1===(o=r.call(s[0],c[l])))return;a.push(s,o),s=s[1][o],++l}if(-1!==(o=r.call(s[0],c[l]))){for(t=s[1][o],s[0].splice(o,1),s[1].splice(o,1);!s[0].length&&a.length;)o=a.pop(),(s=a.pop())[0].splice(o,1),s[1].splice(o,1);delete i[t]}},clear:function(){n=[[],[]],i=o(null)}}}},{"es5-ext/array/#/e-index-of":5}],77:[function(e,t,n){"use strict";t.exports=function(e){return e?function(t){for(var n=String(t[0]),r=0,o=e;--o;)n+=""+t[++r];return n}:function(){return""}}},{}],78:[function(e,t,n){"use strict";var r=e("es5-ext/array/#/e-index-of"),o=Object.create;t.exports=function(){var e=0,t=[],n=o(null);return{get:function(e){var n,o=0,i=t,l=e.length;if(0===l)return i[l]||null;if(i=i[l]){for(;o<l-1;){if(-1===(n=r.call(i[0],e[o])))return null;i=i[1][n],++o}return-1===(n=r.call(i[0],e[o]))?null:i[1][n]||null}return null},set:function(o){var i,l=0,s=t,a=o.length;if(0===a)s[a]=++e;else{for(s[a]||(s[a]=[[],[]]),s=s[a];l<a-1;)-1===(i=r.call(s[0],o[l]))&&(i=s[0].push(o[l])-1,s[1].push([[],[]])),s=s[1][i],++l;-1===(i=r.call(s[0],o[l]))&&(i=s[0].push(o[l])-1),s[1][i]=++e}return n[e]=o,e},delete:function(e){var o,i=0,l=t,s=n[e],a=s.length,c=[];if(0===a)delete l[a];else if(l=l[a]){for(;i<a-1;){if(-1===(o=r.call(l[0],s[i])))return;c.push(l,o),l=l[1][o],++i}if(-1===(o=r.call(l[0],s[i])))return;for(e=l[1][o],l[0].splice(o,1),l[1].splice(o,1);!l[0].length&&c.length;)o=c.pop(),(l=c.pop())[0].splice(o,1),l[1].splice(o,1)}delete n[e]},clear:function(){t=[],n=o(null)}}}},{"es5-ext/array/#/e-index-of":5}],79:[function(e,t,n){"use strict";t.exports=function(e){var t,n,r=e.length;if(!r)return"";for(t=String(e[n=0]);--r;)t+=""+e[++n];return t}},{}],80:[function(e,t,n){"use strict";var r=e("es5-ext/object/valid-callable"),o=e("es5-ext/object/for-each"),i=e("./lib/registered-extensions"),l=e("./lib/configure-map"),s=e("./lib/resolve-length");t.exports=function e(t){var n,a,c;if(r(t),(n=Object(arguments[1])).async&&n.promise)throw new Error("Options 'async' and 'promise' cannot be used together");return hasOwnProperty.call(t,"__memoized__")&&!n.force?t:(a=s(n.length,t.length,n.async&&i.async),c=l(t,a,n),o(i,function(e,t){n[t]&&e(n[t],c,n)}),e.__profiler__&&e.__profiler__(c),c.updateEnv(),c.memoized)}},{"./lib/configure-map":70,"./lib/registered-extensions":71,"./lib/resolve-length":72,"es5-ext/object/for-each":27,"es5-ext/object/valid-callable":38}],81:[function(e,t,n){"use strict";var r=e("../render/vnode");t.exports=function(e,t,n){var o=[],i=!1,l=!1;function s(){if(i)throw new Error("Nested m.redraw.sync() call");i=!0;for(var t=0;t<o.length;t+=2)try{e(o[t],r(o[t+1]),a)}catch(e){n.error(e)}i=!1}function a(){l||(l=!0,t(function(){l=!1,s()}))}return a.sync=s,{mount:function(t,n){if(null!=n&&null==n.view&&"function"!=typeof n)throw new TypeError("m.mount(element, component) expects a component, not a vnode");var i=o.indexOf(t);i>=0&&(o.splice(i,2),e(t,[],a)),null!=n&&(o.push(t,n),e(t,r(n),a))},redraw:a}}},{"../render/vnode":100}],82:[function(e,t,n){(function(n){(function(){"use strict";var r=e("../render/vnode"),o=e("../render/hyperscript"),i=e("../promise/promise"),l=e("../pathname/build"),s=e("../pathname/parse"),a=e("../pathname/compileTemplate"),c=e("../pathname/assign"),u={};t.exports=function(e,t){var f;function p(t,n,r){if(t=l(t,n),null!=f){f();var o=r?r.state:null,i=r?r.title:null;r&&r.replace?e.history.replaceState(o,i,b.prefix+t):e.history.pushState(o,i,b.prefix+t)}else e.location.href=b.prefix+t}var d,h,m,v,y=u,g=b.SKIP={};function b(o,l,x){if(null==o)throw new Error("Ensure the DOM element that was passed to `m.route` is not undefined");var w,j=0,_=Object.keys(x).map(function(e){if("/"!==e[0])throw new SyntaxError("Routes must start with a `/`");if(/:([^\/\.-]+)(\.{3})?:/.test(e))throw new SyntaxError("Route parameter names must be separated with either `/`, `.`, or `-`");return{route:e,component:x[e],check:a(e)}}),O="function"==typeof n?n:setTimeout,T=i.resolve(),S=!1;if(f=null,null!=l){var E=s(l);if(!_.some(function(e){return e.check(E)}))throw new ReferenceError("Default route doesn't match any known routes")}function k(){S=!1;var n=e.location.hash;"#"!==b.prefix[0]&&(n=e.location.search+n,"?"!==b.prefix[0]&&"/"!==(n=e.location.pathname+n)[0]&&(n="/"+n));var r=n.concat().replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent).slice(b.prefix.length),o=s(r);function i(){if(r===l)throw new Error("Could not resolve default route "+l);p(l,null,{replace:!0})}c(o.params,e.history.state),function e(n){for(;n<_.length;n++)if(_[n].check(o)){var l=_[n].component,s=_[n].route,a=l,c=v=function(i){if(c===v){if(i===g)return e(n+1);d=null==i||"function"!=typeof i.view&&"function"!=typeof i?"div":i,h=o.params,m=r,v=null,y=l.render?l:null,2===j?t.redraw():(j=2,t.redraw.sync())}};return void(l.view||"function"==typeof l?(l={},c(a)):l.onmatch?T.then(function(){return l.onmatch(o.params,r,s)}).then(c,i):c("div"))}i()}(0)}return f=function(){S||(S=!0,O(k))},"function"==typeof e.history.pushState?(w=function(){e.removeEventListener("popstate",f,!1)},e.addEventListener("popstate",f,!1)):"#"===b.prefix[0]&&(f=null,w=function(){e.removeEventListener("hashchange",k,!1)},e.addEventListener("hashchange",k,!1)),t.mount(o,{onbeforeupdate:function(){return!(!(j=j?2:1)||u===y)},oncreate:k,onremove:w,view:function(){if(j&&u!==y){var e=[r(d,h.key,h)];return y&&(e=y.render(e[0])),e}}})}return b.set=function(e,t,n){null!=v&&((n=n||{}).replace=!0),v=null,p(e,t,n)},b.get=function(){return m},b.prefix="#!",b.Link={view:function(e){var t,n,r=e.attrs.options,i={};c(i,e.attrs),i.selector=i.options=i.key=i.oninit=i.oncreate=i.onbeforeupdate=i.onupdate=i.onbeforeremove=i.onremove=null;var l=o(e.attrs.selector||"a",i,e.children);return(l.attrs.disabled=Boolean(l.attrs.disabled))?(l.attrs.href=null,l.attrs["aria-disabled"]="true",l.attrs.onclick=null):(t=l.attrs.onclick,n=l.attrs.href,l.attrs.href=b.prefix+n,l.attrs.onclick=function(e){var o;"function"==typeof t?o=t.call(e.currentTarget,e):null==t||"object"!=typeof t||"function"==typeof t.handleEvent&&t.handleEvent(e),!1===o||e.defaultPrevented||0!==e.button&&0!==e.which&&1!==e.which||e.currentTarget.target&&"_self"!==e.currentTarget.target||e.ctrlKey||e.metaKey||e.shiftKey||e.altKey||(e.preventDefault(),e.redraw=!1,b.set(n,null,r))}),l}},b.param=function(e){return h&&null!=e?h[e]:h},b}}).call(this)}).call(this,e("timers").setImmediate)},{"../pathname/assign":86,"../pathname/build":87,"../pathname/compileTemplate":88,"../pathname/parse":89,"../promise/promise":91,"../render/hyperscript":96,"../render/vnode":100,timers:106}],83:[function(e,t,n){"use strict";var r=e("./render/hyperscript");r.trust=e("./render/trust"),r.fragment=e("./render/fragment"),t.exports=r},{"./render/fragment":95,"./render/hyperscript":96,"./render/trust":99}],84:[function(e,t,n){"use strict";var r=e("./hyperscript"),o=e("./request"),i=e("./mount-redraw"),l=function(){return r.apply(this,arguments)};l.m=r,l.trust=r.trust,l.fragment=r.fragment,l.mount=i.mount,l.route=e("./route"),l.render=e("./render"),l.redraw=i.redraw,l.request=o.request,l.jsonp=o.jsonp,l.parseQueryString=e("./querystring/parse"),l.buildQueryString=e("./querystring/build"),l.parsePathname=e("./pathname/parse"),l.buildPathname=e("./pathname/build"),l.vnode=e("./render/vnode"),l.PromisePolyfill=e("./promise/polyfill"),t.exports=l},{"./hyperscript":83,"./mount-redraw":85,"./pathname/build":87,"./pathname/parse":89,"./promise/polyfill":90,"./querystring/build":92,"./querystring/parse":93,"./render":94,"./render/vnode":100,"./request":101,"./route":103}],85:[function(e,t,n){"use strict";var r=e("./render");t.exports=e("./api/mount-redraw")(r,requestAnimationFrame,console)},{"./api/mount-redraw":81,"./render":94}],86:[function(e,t,n){"use strict";t.exports=Object.assign||function(e,t){t&&Object.keys(t).forEach(function(n){e[n]=t[n]})}},{}],87:[function(e,t,n){"use strict";var r=e("../querystring/build"),o=e("./assign");t.exports=function(e,t){if(/:([^\/\.-]+)(\.{3})?:/.test(e))throw new SyntaxError("Template parameter names *must* be separated");if(null==t)return e;var n=e.indexOf("?"),i=e.indexOf("#"),l=i<0?e.length:i,s=n<0?l:n,a=e.slice(0,s),c={};o(c,t);var u=a.replace(/:([^\/\.-]+)(\.{3})?/g,function(e,n,r){return delete c[n],null==t[n]?e:r?t[n]:encodeURIComponent(String(t[n]))}),f=u.indexOf("?"),p=u.indexOf("#"),d=p<0?u.length:p,h=f<0?d:f,m=u.slice(0,h);n>=0&&(m+=e.slice(n,l)),f>=0&&(m+=(n<0?"?":"&")+u.slice(f,d));var v=r(c);return v&&(m+=(n<0&&f<0?"?":"&")+v),i>=0&&(m+=e.slice(i)),p>=0&&(m+=(i<0?"":"&")+u.slice(p)),m}},{"../querystring/build":92,"./assign":86}],88:[function(e,t,n){"use strict";var r=e("./parse");t.exports=function(e){var t=r(e),n=Object.keys(t.params),o=[],i=new RegExp("^"+t.path.replace(/:([^\/.-]+)(\.{3}|\.(?!\.)|-)?|[\\^$*+.()|\[\]{}]/g,function(e,t,n){return null==t?"\\"+e:(o.push({k:t,r:"..."===n}),"..."===n?"(.*)":"."===n?"([^/]+)\\.":"([^/]+)"+(n||""))})+"$");return function(e){for(var r=0;r<n.length;r++)if(t.params[n[r]]!==e.params[n[r]])return!1;if(!o.length)return i.test(e.path);var l=i.exec(e.path);if(null==l)return!1;for(r=0;r<o.length;r++)e.params[o[r].k]=o[r].r?l[r+1]:decodeURIComponent(l[r+1]);return!0}}},{"./parse":89}],89:[function(e,t,n){"use strict";var r=e("../querystring/parse");t.exports=function(e){var t=e.indexOf("?"),n=e.indexOf("#"),o=n<0?e.length:n,i=t<0?o:t,l=e.slice(0,i).replace(/\/{2,}/g,"/");return l?("/"!==l[0]&&(l="/"+l),l.length>1&&"/"===l[l.length-1]&&(l=l.slice(0,-1))):l="/",{path:l,params:t<0?{}:r(e.slice(t+1,o))}}},{"../querystring/parse":93}],90:[function(e,t,n){(function(e){(function(){"use strict";var n=function(t){if(!(this instanceof n))throw new Error("Promise must be called with `new`");if("function"!=typeof t)throw new TypeError("executor must be a function");var r=this,o=[],i=[],l=u(o,!0),s=u(i,!1),a=r._instance={resolvers:o,rejectors:i},c="function"==typeof e?e:setTimeout;function u(e,t){return function n(l){var u;try{if(!t||null==l||"object"!=typeof l&&"function"!=typeof l||"function"!=typeof(u=l.then))c(function(){t||0!==e.length||console.error("Possible unhandled promise rejection:",l);for(var r=0;r<e.length;r++)e[r](l);o.length=0,i.length=0,a.state=t,a.retry=function(){n(l)}});else{if(l===r)throw new TypeError("Promise can't be resolved w/ itself");f(u.bind(l))}}catch(e){s(e)}}}function f(e){var t=0;function n(e){return function(n){t++>0||e(n)}}var r=n(s);try{e(n(l),r)}catch(e){r(e)}}f(t)};n.prototype.then=function(e,t){var r,o,i=this._instance;function l(e,t,n,l){t.push(function(t){if("function"!=typeof e)n(t);else try{r(e(t))}catch(e){o&&o(e)}}),"function"==typeof i.retry&&l===i.state&&i.retry()}var s=new n(function(e,t){r=e,o=t});return l(e,i.resolvers,r,!0),l(t,i.rejectors,o,!1),s},n.prototype.catch=function(e){return this.then(null,e)},n.prototype.finally=function(e){return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){return n.reject(t)})})},n.resolve=function(e){return e instanceof n?e:new n(function(t){t(e)})},n.reject=function(e){return new n(function(t,n){n(e)})},n.all=function(e){return new n(function(t,n){var r=e.length,o=0,i=[];if(0===e.length)t([]);else for(var l=0;l<e.length;l++)!function(l){function s(e){o++,i[l]=e,o===r&&t(i)}null==e[l]||"object"!=typeof e[l]&&"function"!=typeof e[l]||"function"!=typeof e[l].then?s(e[l]):e[l].then(s,n)}(l)})},n.race=function(e){return new n(function(t,n){for(var r=0;r<e.length;r++)e[r].then(t,n)})},t.exports=n}).call(this)}).call(this,e("timers").setImmediate)},{timers:106}],91:[function(e,t,n){(function(n){(function(){"use strict";var r=e("./polyfill");"undefined"!=typeof window?(void 0===window.Promise?window.Promise=r:window.Promise.prototype.finally||(window.Promise.prototype.finally=r.prototype.finally),t.exports=window.Promise):void 0!==n?(void 0===n.Promise?n.Promise=r:n.Promise.prototype.finally||(n.Promise.prototype.finally=r.prototype.finally),t.exports=n.Promise):t.exports=r}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polyfill":90}],92:[function(e,t,n){"use strict";t.exports=function(e){if("[object Object]"!==Object.prototype.toString.call(e))return"";var t=[];for(var n in e)r(n,e[n]);return t.join("&");function r(e,n){if(Array.isArray(n))for(var o=0;o<n.length;o++)r(e+"["+o+"]",n[o]);else if("[object Object]"===Object.prototype.toString.call(n))for(var o in n)r(e+"["+o+"]",n[o]);else t.push(encodeURIComponent(e)+(null!=n&&""!==n?"="+encodeURIComponent(n):""))}}},{}],93:[function(e,t,n){"use strict";t.exports=function(e){if(""===e||null==e)return{};"?"===e.charAt(0)&&(e=e.slice(1));for(var t=e.split("&"),n={},r={},o=0;o<t.length;o++){var i=t[o].split("="),l=decodeURIComponent(i[0]),s=2===i.length?decodeURIComponent(i[1]):"";"true"===s?s=!0:"false"===s&&(s=!1);var a=l.split(/\]\[?|\[/),c=r;l.indexOf("[")>-1&&a.pop();for(var u=0;u<a.length;u++){var f=a[u],p=a[u+1],d=""==p||!isNaN(parseInt(p,10));if(""===f)null==n[l=a.slice(0,u).join()]&&(n[l]=Array.isArray(c)?c.length:0),f=n[l]++;else if("__proto__"===f)break;if(u===a.length-1)c[f]=s;else{var h=Object.getOwnPropertyDescriptor(c,f);null!=h&&(h=h.value),null==h&&(c[f]=h=d?[]:{}),c=h}}}return r}},{}],94:[function(e,t,n){"use strict";t.exports=e("./render/render")(window)},{"./render/render":98}],95:[function(e,t,n){"use strict";var r=e("../render/vnode"),o=e("./hyperscriptVnode");t.exports=function(){var e=o.apply(0,arguments);return e.tag="[",e.children=r.normalizeChildren(e.children),e}},{"../render/vnode":100,"./hyperscriptVnode":97}],96:[function(e,t,n){"use strict";var r=e("../render/vnode"),o=e("./hyperscriptVnode"),i=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,l={},s={}.hasOwnProperty;function a(e){for(var t in e)if(s.call(e,t))return!1;return!0}t.exports=function(e){if(null==e||"string"!=typeof e&&"function"!=typeof e&&"function"!=typeof e.view)throw Error("The selector must be either a string or a component.");var t=o.apply(1,arguments);return"string"==typeof e&&(t.children=r.normalizeChildren(t.children),"["!==e)?function(e,t){var n=t.attrs,o=r.normalizeChildren(t.children),i=s.call(n,"class"),l=i?n.class:n.className;if(t.tag=e.tag,t.attrs=null,t.children=void 0,!a(e.attrs)&&!a(n)){var c={};for(var u in n)s.call(n,u)&&(c[u]=n[u]);n=c}for(var u in e.attrs)s.call(e.attrs,u)&&"className"!==u&&!s.call(n,u)&&(n[u]=e.attrs[u]);for(var u in null==l&&null==e.attrs.className||(n.className=null!=l?null!=e.attrs.className?String(e.attrs.className)+" "+String(l):l:null!=e.attrs.className?e.attrs.className:null),i&&(n.class=null),n)if(s.call(n,u)&&"key"!==u){t.attrs=n;break}return Array.isArray(o)&&1===o.length&&null!=o[0]&&"#"===o[0].tag?t.text=o[0].children:t.children=o,t}(l[e]||function(e){for(var t,n="div",r=[],o={};t=i.exec(e);){var s=t[1],a=t[2];if(""===s&&""!==a)n=a;else if("#"===s)o.id=a;else if("."===s)r.push(a);else if("["===t[3][0]){var c=t[6];c&&(c=c.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),"class"===t[4]?r.push(c):o[t[4]]=""===c?c:c||!0}}return r.length>0&&(o.className=r.join(" ")),l[e]={tag:n,attrs:o}}(e),t):(t.tag=e,t)}},{"../render/vnode":100,"./hyperscriptVnode":97}],97:[function(e,t,n){"use strict";var r=e("../render/vnode");t.exports=function(){var e,t=arguments[this],n=this+1;if(null==t?t={}:("object"!=typeof t||null!=t.tag||Array.isArray(t))&&(t={},n=this),arguments.length===n+1)e=arguments[n],Array.isArray(e)||(e=[e]);else for(e=[];n<arguments.length;)e.push(arguments[n++]);return r("",t.key,t,e)}},{"../render/vnode":100}],98:[function(e,t,n){"use strict";var r=e("../render/vnode");t.exports=function(e){var t,n=e&&e.document,o={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function i(e){return e.attrs&&e.attrs.xmlns||o[e.tag]}function l(e,t){if(e.state!==t)throw new Error("`vnode.state` must not be modified")}function s(e){var t=e.state;try{return this.apply(t,arguments)}finally{l(e,t)}}function a(){try{return n.activeElement}catch(e){return null}}function c(e,t,n,r,o,i,l){for(var s=n;s<r;s++){var a=t[s];null!=a&&u(e,a,o,l,i)}}function u(e,t,o,l,a){var f=t.tag;if("string"==typeof f)switch(t.state={},null!=t.attrs&&I(t.attrs,t,o),f){case"#":!function(e,t,r){t.dom=n.createTextNode(t.children),b(e,t.dom,r)}(e,t,a);break;case"<":p(e,t,l,a);break;case"[":!function(e,t,r,o,i){var l=n.createDocumentFragment();if(null!=t.children){var s=t.children;c(l,s,0,s.length,r,null,o)}t.dom=l.firstChild,t.domSize=l.childNodes.length,b(e,l,i)}(e,t,o,l,a);break;default:!function(e,t,o,l,s){var a=t.tag,u=t.attrs,f=u&&u.is,p=(l=i(t)||l)?f?n.createElementNS(l,a,{is:f}):n.createElementNS(l,a):f?n.createElement(a,{is:f}):n.createElement(a);t.dom=p,null!=u&&function(e,t,n){for(var r in t)S(e,r,null,t[r],n)}(t,u,l);if(b(e,p,s),!x(t)&&(null!=t.text&&(""!==t.text?p.textContent=t.text:t.children=[r("#",void 0,void 0,t.text,void 0,void 0)]),null!=t.children)){var d=t.children;c(p,d,0,d.length,o,null,l),"select"===t.tag&&null!=u&&function(e,t){if("value"in t)if(null===t.value)-1!==e.dom.selectedIndex&&(e.dom.value=null);else{var n=""+t.value;e.dom.value===n&&-1!==e.dom.selectedIndex||(e.dom.value=n)}"selectedIndex"in t&&S(e,"selectedIndex",null,t.selectedIndex,void 0)}(t,u)}}(e,t,o,l,a)}else!function(e,t,n,o,i){(function(e,t){var n;if("function"==typeof e.tag.view){if(e.state=Object.create(e.tag),null!=(n=e.state.view).$$reentrantLock$$)return;n.$$reentrantLock$$=!0}else{if(e.state=void 0,null!=(n=e.tag).$$reentrantLock$$)return;n.$$reentrantLock$$=!0,e.state=null!=e.tag.prototype&&"function"==typeof e.tag.prototype.view?new e.tag(e):e.tag(e)}if(I(e.state,e,t),null!=e.attrs&&I(e.attrs,e,t),e.instance=r.normalize(s.call(e.state.view,e)),e.instance===e)throw Error("A view cannot return the vnode it received as argument");n.$$reentrantLock$$=null})(t,n),null!=t.instance?(u(e,t.instance,n,o,i),t.dom=t.instance.dom,t.domSize=null!=t.dom?t.instance.domSize:0):t.domSize=0}(e,t,o,l,a)}var f={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function p(e,t,r,o){var i=t.children.match(/^\s*?<(\w+)/im)||[],l=n.createElement(f[i[1]]||"div");"http://www.w3.org/2000/svg"===r?(l.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+t.children+"</svg>",l=l.firstChild):l.innerHTML=t.children,t.dom=l.firstChild,t.domSize=l.childNodes.length,t.instance=[];for(var s,a=n.createDocumentFragment();s=l.firstChild;)t.instance.push(s),a.appendChild(s);b(e,a,o)}function d(e,t,n,r,o,i){if(t!==n&&(null!=t||null!=n))if(null==t||0===t.length)c(e,n,0,n.length,r,o,i);else if(null==n||0===n.length)w(e,t,0,t.length);else{var l=null!=t[0]&&null!=t[0].key,s=null!=n[0]&&null!=n[0].key,a=0,f=0;if(!l)for(;f<t.length&&null==t[f];)f++;if(!s)for(;a<n.length&&null==n[a];)a++;if(null===s&&null==l)return;if(l!==s)w(e,t,f,t.length),c(e,n,a,n.length,r,o,i);else if(s){for(var p,d,b,x,_,O=t.length-1,T=n.length-1;O>=f&&T>=a&&(b=t[O],x=n[T],b.key===x.key);)b!==x&&h(e,b,x,r,o,i),null!=x.dom&&(o=x.dom),O--,T--;for(;O>=f&&T>=a&&(p=t[f],d=n[a],p.key===d.key);)f++,a++,p!==d&&h(e,p,d,r,y(t,f,o),i);for(;O>=f&&T>=a&&a!==T&&p.key===x.key&&b.key===d.key;)g(e,b,_=y(t,f,o)),b!==d&&h(e,b,d,r,_,i),++a<=--T&&g(e,p,o),p!==x&&h(e,p,x,r,o,i),null!=x.dom&&(o=x.dom),f++,b=t[--O],x=n[T],p=t[f],d=n[a];for(;O>=f&&T>=a&&b.key===x.key;)b!==x&&h(e,b,x,r,o,i),null!=x.dom&&(o=x.dom),T--,b=t[--O],x=n[T];if(a>T)w(e,t,f,O+1);else if(f>O)c(e,n,a,T+1,r,o,i);else{var S,E,k=o,L=T-a+1,z=new Array(L),C=0,P=0,A=2147483647,N=0;for(P=0;P<L;P++)z[P]=-1;for(P=T;P>=a;P--){null==S&&(S=m(t,f,O+1));var M=S[(x=n[P]).key];null!=M&&(A=M<A?M:-1,z[P-a]=M,b=t[M],t[M]=null,b!==x&&h(e,b,x,r,o,i),null!=x.dom&&(o=x.dom),N++)}if(o=k,N!==O-f+1&&w(e,t,f,O+1),0===N)c(e,n,a,T+1,r,o,i);else if(-1===A)for(C=(E=function(e){for(var t=[0],n=0,r=0,o=0,i=v.length=e.length,o=0;o<i;o++)v[o]=e[o];for(var o=0;o<i;++o)if(-1!==e[o]){var l=t[t.length-1];if(e[l]<e[o])v[o]=l,t.push(o);else{for(n=0,r=t.length-1;n<r;){var s=(n>>>1)+(r>>>1)+(n&r&1);e[t[s]]<e[o]?n=s+1:r=s}e[o]<e[t[n]]&&(n>0&&(v[o]=t[n-1]),t[n]=o)}}n=t.length,r=t[n-1];for(;n-- >0;)t[n]=r,r=v[r];return v.length=0,t}(z)).length-1,P=T;P>=a;P--)d=n[P],-1===z[P-a]?u(e,d,r,i,o):E[C]===P-a?C--:g(e,d,o),null!=d.dom&&(o=n[P].dom);else for(P=T;P>=a;P--)d=n[P],-1===z[P-a]&&u(e,d,r,i,o),null!=d.dom&&(o=n[P].dom)}}else{var I=t.length<n.length?t.length:n.length;for(a=a<f?a:f;a<I;a++)(p=t[a])===(d=n[a])||null==p&&null==d||(null==p?u(e,d,r,i,y(t,a+1,o)):null==d?j(e,p):h(e,p,d,r,y(t,a+1,o),i));t.length>I&&w(e,t,a,t.length),n.length>I&&c(e,n,a,n.length,r,o,i)}}}function h(e,t,n,o,l,a){var c=t.tag;if(c===n.tag){if(n.state=t.state,n.events=t.events,function(e,t){do{if(null!=e.attrs&&"function"==typeof e.attrs.onbeforeupdate){var n=s.call(e.attrs.onbeforeupdate,e,t);if(void 0!==n&&!n)break}if("string"!=typeof e.tag&&"function"==typeof e.state.onbeforeupdate){var n=s.call(e.state.onbeforeupdate,e,t);if(void 0!==n&&!n)break}return!1}while(0);return e.dom=t.dom,e.domSize=t.domSize,e.instance=t.instance,e.attrs=t.attrs,e.children=t.children,e.text=t.text,!0}(n,t))return;if("string"==typeof c)switch(null!=n.attrs&&R(n.attrs,n,o),c){case"#":!function(e,t){e.children.toString()!==t.children.toString()&&(e.dom.nodeValue=t.children);t.dom=e.dom}(t,n);break;case"<":!function(e,t,n,r,o){t.children!==n.children?(_(e,t),p(e,n,r,o)):(n.dom=t.dom,n.domSize=t.domSize,n.instance=t.instance)}(e,t,n,a,l);break;case"[":!function(e,t,n,r,o,i){d(e,t.children,n.children,r,o,i);var l=0,s=n.children;if(n.dom=null,null!=s){for(var a=0;a<s.length;a++){var c=s[a];null!=c&&null!=c.dom&&(null==n.dom&&(n.dom=c.dom),l+=c.domSize||1)}1!==l&&(n.domSize=l)}}(e,t,n,o,l,a);break;default:!function(e,t,n,o){var l=t.dom=e.dom;o=i(t)||o,"textarea"===t.tag&&(null==t.attrs&&(t.attrs={}),null!=t.text&&(t.attrs.value=t.text,t.text=void 0));(function(e,t,n,r){if(null!=n)for(var o in n)S(e,o,t&&t[o],n[o],r);var i;if(null!=t)for(var o in t)null==(i=t[o])||null!=n&&null!=n[o]||E(e,o,i,r)})(t,e.attrs,t.attrs,o),x(t)||(null!=e.text&&null!=t.text&&""!==t.text?e.text.toString()!==t.text.toString()&&(e.dom.firstChild.nodeValue=t.text):(null!=e.text&&(e.children=[r("#",void 0,void 0,e.text,void 0,e.dom.firstChild)]),null!=t.text&&(t.children=[r("#",void 0,void 0,t.text,void 0,void 0)]),d(l,e.children,t.children,n,null,o)))}(t,n,o,a)}else!function(e,t,n,o,i,l){if(n.instance=r.normalize(s.call(n.state.view,n)),n.instance===n)throw Error("A view cannot return the vnode it received as argument");R(n.state,n,o),null!=n.attrs&&R(n.attrs,n,o);null!=n.instance?(null==t.instance?u(e,n.instance,o,l,i):h(e,t.instance,n.instance,o,i,l),n.dom=n.instance.dom,n.domSize=n.instance.domSize):null!=t.instance?(j(e,t.instance),n.dom=void 0,n.domSize=0):(n.dom=t.dom,n.domSize=t.domSize)}(e,t,n,o,l,a)}else j(e,t),u(e,n,o,a,l)}function m(e,t,n){for(var r=Object.create(null);t<n;t++){var o=e[t];if(null!=o){var i=o.key;null!=i&&(r[i]=t)}}return r}var v=[];function y(e,t,n){for(;t<e.length;t++)if(null!=e[t]&&null!=e[t].dom)return e[t].dom;return n}function g(e,t,r){var o=n.createDocumentFragment();!function e(t,n,r){for(;null!=r.dom&&r.dom.parentNode===t;){if("string"!=typeof r.tag){if(null!=(r=r.instance))continue}else if("<"===r.tag)for(var o=0;o<r.instance.length;o++)n.appendChild(r.instance[o]);else if("["!==r.tag)n.appendChild(r.dom);else if(1===r.children.length){if(null!=(r=r.children[0]))continue}else for(var o=0;o<r.children.length;o++){var i=r.children[o];null!=i&&e(t,n,i)}break}}(e,o,t),b(e,o,r)}function b(e,t,n){null!=n?e.insertBefore(t,n):e.appendChild(t)}function x(e){if(null==e.attrs||null==e.attrs.contenteditable&&null==e.attrs.contentEditable)return!1;var t=e.children;if(null!=t&&1===t.length&&"<"===t[0].tag){var n=t[0].children;e.dom.innerHTML!==n&&(e.dom.innerHTML=n)}else if(null!=e.text||null!=t&&0!==t.length)throw new Error("Child node of a contenteditable must be trusted");return!0}function w(e,t,n,r){for(var o=n;o<r;o++){var i=t[o];null!=i&&j(e,i)}}function j(e,t){var n,r,o,i=0,a=t.state;"string"!=typeof t.tag&&"function"==typeof t.state.onbeforeremove&&(null!=(o=s.call(t.state.onbeforeremove,t))&&"function"==typeof o.then&&(i=1,n=o));t.attrs&&"function"==typeof t.attrs.onbeforeremove&&(null!=(o=s.call(t.attrs.onbeforeremove,t))&&"function"==typeof o.then&&(i|=2,r=o));if(l(t,a),i){if(null!=n){var c=function(){1&i&&((i&=2)||u())};n.then(c,c)}if(null!=r){c=function(){2&i&&((i&=1)||u())};r.then(c,c)}}else T(t),O(e,t);function u(){l(t,a),T(t),O(e,t)}}function _(e,t){for(var n=0;n<t.instance.length;n++)e.removeChild(t.instance[n])}function O(e,t){for(;null!=t.dom&&t.dom.parentNode===e;){if("string"!=typeof t.tag){if(null!=(t=t.instance))continue}else if("<"===t.tag)_(e,t);else{if("["!==t.tag&&(e.removeChild(t.dom),!Array.isArray(t.children)))break;if(1===t.children.length){if(null!=(t=t.children[0]))continue}else for(var n=0;n<t.children.length;n++){var r=t.children[n];null!=r&&O(e,r)}}break}}function T(e){if("string"!=typeof e.tag&&"function"==typeof e.state.onremove&&s.call(e.state.onremove,e),e.attrs&&"function"==typeof e.attrs.onremove&&s.call(e.attrs.onremove,e),"string"!=typeof e.tag)null!=e.instance&&T(e.instance);else{var t=e.children;if(Array.isArray(t))for(var n=0;n<t.length;n++){var r=t[n];null!=r&&T(r)}}}function S(e,t,r,o,i){if("key"!==t&&"is"!==t&&null!=o&&!k(t)&&(r!==o||function(e,t){return"value"===t||"checked"===t||"selectedIndex"===t||"selected"===t&&e.dom===a()||"option"===e.tag&&e.dom.parentNode===n.activeElement}(e,t)||"object"==typeof o)){if("o"===t[0]&&"n"===t[1])return M(e,t,o);if("xlink:"===t.slice(0,6))e.dom.setAttributeNS("http://www.w3.org/1999/xlink",t.slice(6),o);else if("style"===t)A(e.dom,r,o);else if(L(e,t,i)){if("value"===t){if(("input"===e.tag||"textarea"===e.tag)&&e.dom.value===""+o&&e.dom===a())return;if("select"===e.tag&&null!==r&&e.dom.value===""+o)return;if("option"===e.tag&&null!==r&&e.dom.value===""+o)return}"input"===e.tag&&"type"===t?e.dom.setAttribute(t,o):e.dom[t]=o}else"boolean"==typeof o?o?e.dom.setAttribute(t,""):e.dom.removeAttribute(t):e.dom.setAttribute("className"===t?"class":t,o)}}function E(e,t,n,r){if("key"!==t&&"is"!==t&&null!=n&&!k(t))if("o"!==t[0]||"n"!==t[1]||k(t))if("style"===t)A(e.dom,n,null);else if(!L(e,t,r)||"className"===t||"value"===t&&("option"===e.tag||"select"===e.tag&&-1===e.dom.selectedIndex&&e.dom===a())||"input"===e.tag&&"type"===t){var o=t.indexOf(":");-1!==o&&(t=t.slice(o+1)),!1!==n&&e.dom.removeAttribute("className"===t?"class":t)}else e.dom[t]=null;else M(e,t,void 0)}function k(e){return"oninit"===e||"oncreate"===e||"onupdate"===e||"onremove"===e||"onbeforeremove"===e||"onbeforeupdate"===e}function L(e,t,n){return void 0===n&&(e.tag.indexOf("-")>-1||null!=e.attrs&&e.attrs.is||"href"!==t&&"list"!==t&&"form"!==t&&"width"!==t&&"height"!==t)&&t in e.dom}var z=/[A-Z]/g;function C(e){return"-"+e.toLowerCase()}function P(e){return"-"===e[0]&&"-"===e[1]?e:"cssFloat"===e?"float":e.replace(z,C)}function A(e,t,n){if(t===n);else if(null==n)e.style.cssText="";else if("object"!=typeof n)e.style.cssText=n;else if(null==t||"object"!=typeof t)for(var r in e.style.cssText="",n){null!=(o=n[r])&&e.style.setProperty(P(r),String(o))}else{for(var r in n){var o;null!=(o=n[r])&&(o=String(o))!==String(t[r])&&e.style.setProperty(P(r),o)}for(var r in t)null!=t[r]&&null==n[r]&&e.style.removeProperty(P(r))}}function N(){this._=t}function M(e,t,n){if(null!=e.events){if(e.events[t]===n)return;null==n||"function"!=typeof n&&"object"!=typeof n?(null!=e.events[t]&&e.dom.removeEventListener(t.slice(2),e.events,!1),e.events[t]=void 0):(null==e.events[t]&&e.dom.addEventListener(t.slice(2),e.events,!1),e.events[t]=n)}else null==n||"function"!=typeof n&&"object"!=typeof n||(e.events=new N,e.dom.addEventListener(t.slice(2),e.events,!1),e.events[t]=n)}function I(e,t,n){"function"==typeof e.oninit&&s.call(e.oninit,t),"function"==typeof e.oncreate&&n.push(s.bind(e.oncreate,t))}function R(e,t,n){"function"==typeof e.onupdate&&n.push(s.bind(e.onupdate,t))}return N.prototype=Object.create(null),N.prototype.handleEvent=function(e){var t,n=this["on"+e.type];"function"==typeof n?t=n.call(e.currentTarget,e):"function"==typeof n.handleEvent&&n.handleEvent(e),this._&&!1!==e.redraw&&(0,this._)(),!1===t&&(e.preventDefault(),e.stopPropagation())},function(e,n,o){if(!e)throw new TypeError("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var i=[],l=a(),s=e.namespaceURI;null==e.vnodes&&(e.textContent=""),n=r.normalizeChildren(Array.isArray(n)?n:[n]);var c=t;try{t="function"==typeof o?o:void 0,d(e,e.vnodes,n,i,null,"http://www.w3.org/1999/xhtml"===s?void 0:s)}finally{t=c}e.vnodes=n,null!=l&&a()!==l&&"function"==typeof l.focus&&l.focus();for(var u=0;u<i.length;u++)i[u]()}}},{"../render/vnode":100}],99:[function(e,t,n){"use strict";var r=e("../render/vnode");t.exports=function(e){return null==e&&(e=""),r("<",void 0,void 0,e,void 0,void 0)}},{"../render/vnode":100}],100:[function(e,t,n){"use strict";function r(e,t,n,r,o,i){return{tag:e,key:t,attrs:n,children:r,text:o,dom:i,domSize:void 0,state:void 0,events:void 0,instance:void 0}}r.normalize=function(e){return Array.isArray(e)?r("[",void 0,void 0,r.normalizeChildren(e),void 0,void 0):null==e||"boolean"==typeof e?null:"object"==typeof e?e:r("#",void 0,void 0,String(e),void 0,void 0)},r.normalizeChildren=function(e){var t=[];if(e.length){for(var n=null!=e[0]&&null!=e[0].key,o=1;o<e.length;o++)if((null!=e[o]&&null!=e[o].key)!==n)throw new TypeError("Vnodes must either always have keys or never have keys!");for(o=0;o<e.length;o++)t[o]=r.normalize(e[o])}return t},t.exports=r},{}],101:[function(e,t,n){"use strict";var r=e("./promise/promise"),o=e("./mount-redraw");t.exports=e("./request/request")(window,r,o.redraw)},{"./mount-redraw":85,"./promise/promise":91,"./request/request":102}],102:[function(e,t,n){"use strict";var r=e("../pathname/build");t.exports=function(e,t,n){var o=0;function i(e){return new t(e)}function l(e){return function(o,l){"string"!=typeof o?(l=o,o=o.url):null==l&&(l={});var s=new t(function(t,n){e(r(o,l.params),l,function(e){if("function"==typeof l.type)if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]=new l.type(e[n]);else e=new l.type(e);t(e)},n)});if(!0===l.background)return s;var a=0;function c(){0==--a&&"function"==typeof n&&n()}return function e(t){var n=t.then;t.constructor=i;t.then=function(){a++;var r=n.apply(t,arguments);return r.then(c,function(e){if(c(),0===a)throw e}),e(r)};return t}(s)}}function s(e,t){for(var n in e.headers)if({}.hasOwnProperty.call(e.headers,n)&&t.test(n))return!0;return!1}return i.prototype=t.prototype,i.__proto__=t,{request:l(function(t,n,r,o){var i,l=null!=n.method?n.method.toUpperCase():"GET",a=n.body,c=!(null!=n.serialize&&n.serialize!==JSON.serialize||a instanceof e.FormData),u=n.responseType||("function"==typeof n.extract?"":"json"),f=new e.XMLHttpRequest,p=!1,d=f,h=f.abort;for(var m in f.abort=function(){p=!0,h.call(this)},f.open(l,t,!1!==n.async,"string"==typeof n.user?n.user:void 0,"string"==typeof n.password?n.password:void 0),c&&null!=a&&!s(n,/^content-type$/i)&&f.setRequestHeader("Content-Type","application/json; charset=utf-8"),"function"==typeof n.deserialize||s(n,/^accept$/i)||f.setRequestHeader("Accept","application/json, text/*"),n.withCredentials&&(f.withCredentials=n.withCredentials),n.timeout&&(f.timeout=n.timeout),f.responseType=u,n.headers)({}).hasOwnProperty.call(n.headers,m)&&f.setRequestHeader(m,n.headers[m]);f.onreadystatechange=function(e){if(!p&&4===e.target.readyState)try{var i,l=e.target.status>=200&&e.target.status<300||304===e.target.status||/^file:\/\//i.test(t),s=e.target.response;if("json"===u?e.target.responseType||"function"==typeof n.extract||(s=JSON.parse(e.target.responseText)):u&&"text"!==u||null==s&&(s=e.target.responseText),"function"==typeof n.extract?(s=n.extract(e.target,n),l=!0):"function"==typeof n.deserialize&&(s=n.deserialize(s)),l)r(s);else{try{i=e.target.responseText}catch(e){i=s}var a=new Error(i);a.code=e.target.status,a.response=s,o(a)}}catch(e){o(e)}},"function"==typeof n.config&&(f=n.config(f,n,t)||f)!==d&&(i=f.abort,f.abort=function(){p=!0,i.call(this)}),null==a?f.send():"function"==typeof n.serialize?f.send(n.serialize(a)):a instanceof e.FormData?f.send(a):f.send(JSON.stringify(a))}),jsonp:l(function(t,n,r,i){var l=n.callbackName||"_mithril_"+Math.round(1e16*Math.random())+"_"+o++,s=e.document.createElement("script");e[l]=function(t){delete e[l],s.parentNode.removeChild(s),r(t)},s.onerror=function(){delete e[l],s.parentNode.removeChild(s),i(new Error("JSONP request failed"))},s.src=t+(t.indexOf("?")<0?"?":"&")+encodeURIComponent(n.callbackKey||"callback")+"="+encodeURIComponent(l),e.document.documentElement.appendChild(s)})}}},{"../pathname/build":87}],103:[function(e,t,n){"use strict";var r=e("./mount-redraw");t.exports=e("./api/router")(window,r)},{"./api/router":82,"./mount-redraw":85}],104:[function(e,t,n){(function(e,n){(function(){"use strict";var r=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e},o=function(e){var t,n,o=document.createTextNode(""),i=0;return new e(function(){var e;if(t)n&&(t=n.concat(t));else{if(!n)return;t=n}if(n=t,t=null,"function"==typeof n)return e=n,n=null,void e();for(o.data=i=++i%2;n;)e=n.shift(),n.length||(n=null),e()}).observe(o,{characterData:!0}),function(e){r(e),t?"function"==typeof t?t=[t,e]:t.push(e):(t=e,o.data=i=++i%2)}};t.exports=function(){if("object"==typeof e&&e&&"function"==typeof e.nextTick)return e.nextTick;if("function"==typeof queueMicrotask)return function(e){queueMicrotask(r(e))};if("object"==typeof document&&document){if("function"==typeof MutationObserver)return o(MutationObserver);if("function"==typeof WebKitMutationObserver)return o(WebKitMutationObserver)}return"function"==typeof n?function(e){n(r(e))}:"function"==typeof setTimeout||"object"==typeof setTimeout?function(e){setTimeout(r(e),0)}:null}()}).call(this)}).call(this,e("_process"),e("timers").setImmediate)},{_process:105,timers:106}],105:[function(e,t,n){var r,o,i=t.exports={};function l(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===l||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:l}catch(e){r=l}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(e){o=s}}();var c,u=[],f=!1,p=-1;function d(){f&&c&&(f=!1,c.length?u=c.concat(u):p=-1,u.length&&h())}function h(){if(!f){var e=a(d);f=!0;for(var t=u.length;t;){for(c=u,u=[];++p<t;)c&&c[p].run();p=-1,t=u.length}c=null,f=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new m(e,t)),1!==u.length||f||a(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],106:[function(e,t,n){(function(t,r){(function(){var o=e("process/browser.js").nextTick,i=Function.prototype.apply,l=Array.prototype.slice,s={},a=0;function c(e,t){this._id=e,this._clearFn=t}n.setTimeout=function(){return new c(i.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new c(i.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e.close()},c.prototype.unref=c.prototype.ref=function(){},c.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n.setImmediate="function"==typeof t?t:function(e){var t=a++,r=!(arguments.length<2)&&l.call(arguments,1);return s[t]=!0,o(function(){s[t]&&(r?e.apply(null,r):e.call(null),n.clearImmediate(t))}),t},n.clearImmediate="function"==typeof r?r:function(e){delete s[e]}}).call(this)}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":105,timers:106}],107:[function(e,t,n){"use strict";t.exports=2147483647},{}],108:[function(e,t,n){"use strict";var r=e("es5-ext/number/to-pos-integer"),o=e("./max-timeout");t.exports=function(e){if((e=r(e))>o)throw new TypeError(e+" exceeds maximum possible timeout");return e}},{"./max-timeout":107,"es5-ext/number/to-pos-integer":22}],109:[function(e,t,n){"use strict";var r=e("../prototype/is");t.exports=function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!r(e)}},{"../prototype/is":112}],110:[function(e,t,n){"use strict";var r=e("../value/is"),o={object:!0,function:!0,undefined:!0};t.exports=function(e){return!!r(e)&&hasOwnProperty.call(o,typeof e)}},{"../value/is":113}],111:[function(e,t,n){"use strict";var r=e("../function/is"),o=/^\s*class[\s{/}]/,i=Function.prototype.toString;t.exports=function(e){return!!r(e)&&!o.test(i.call(e))}},{"../function/is":109}],112:[function(e,t,n){"use strict";var r=e("../object/is");t.exports=function(e){if(!r(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch(e){return!1}}},{"../object/is":110}],113:[function(e,t,n){"use strict";t.exports=function(e){return void 0!==e&&null!==e}},{}],114:[function(e,t,n){t.exports=function(){const e={};function t(e,t,n){this.x=e,this.y=t,this.z=n}t.prototype.dot2=function(e,t){return this.x*e+this.y*t},t.prototype.dot3=function(e,t,n){return this.x*e+this.y*t+this.z*n};const n=[new t(1,1,0),new t(-1,1,0),new t(1,-1,0),new t(-1,-1,0),new t(1,0,1),new t(-1,0,1),new t(1,0,-1),new t(-1,0,-1),new t(0,1,1),new t(0,-1,1),new t(0,1,-1),new t(0,-1,-1)],r=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],o=new Array(512),i=new Array(512);e.seed=function(e){e>0&&e<1&&(e*=65536),(e=Math.floor(e))<256&&(e|=e<<8);for(let l=0;l<256;l++){var t;t=1&l?r[l]^255&e:r[l]^e>>8&255,o[l]=o[l+256]=t,i[l]=i[l+256]=n[t%12]}},e.seed(0);const l=.5*(Math.sqrt(3)-1),s=(3-Math.sqrt(3))/6,a=1/6;function c(e){return e*e*e*(e*(6*e-15)+10)}function u(e,t,n){return(1-n)*e+n*t}return e.simplex2=function(e,t){let n,r,a;const c=(e+t)*l;let u=Math.floor(e+c),f=Math.floor(t+c);const p=(u+f)*s,d=e-u+p,h=t-f+p;let m,v;d>h?(m=1,v=0):(m=0,v=1);const y=d-m+s,g=h-v+s,b=d-1+2*s,x=h-1+2*s,w=i[(u&=255)+o[f&=255]],j=i[u+m+o[f+v]],_=i[u+1+o[f+1]];let O=.5-d*d-h*h,T=.5-y*y-g*g,S=.5-b*b-x*x;return 70*((n=O<0?0:(O*=O)*O*w.dot2(d,h))+(r=T<0?0:(T*=T)*T*j.dot2(y,g))+(a=S<0?0:(S*=S)*S*_.dot2(b,x)))},e.simplex3=function(e,t,n){let r,l,s,c;const u=(e+t+n)*(1/3);let f=Math.floor(e+u),p=Math.floor(t+u),d=Math.floor(n+u);const h=(f+p+d)*a,m=e-f+h,v=t-p+h,y=n-d+h;let g,b,x,w,j,_;m>=v?v>=y?(g=1,b=0,x=0,w=1,j=1,_=0):m>=y?(g=1,b=0,x=0,w=1,j=0,_=1):(g=0,b=0,x=1,w=1,j=0,_=1):v<y?(g=0,b=0,x=1,w=0,j=1,_=1):m<y?(g=0,b=1,x=0,w=0,j=1,_=1):(g=0,b=1,x=0,w=1,j=1,_=0);const O=m-g+a,T=v-b+a,S=y-x+a,E=m-w+2*a,k=v-j+2*a,L=y-_+2*a,z=m-1+.5,C=v-1+.5,P=y-1+.5,A=i[(f&=255)+o[(p&=255)+o[d&=255]]],N=i[f+g+o[p+b+o[d+x]]],M=i[f+w+o[p+j+o[d+_]]],I=i[f+1+o[p+1+o[d+1]]];let R=.6-m*m-v*v-y*y,F=.6-O*O-T*T-S*S,q=.6-E*E-k*k-L*L,$=.6-z*z-C*C-P*P;return 32*((r=R<0?0:(R*=R)*R*A.dot3(m,v,y))+(l=F<0?0:(F*=F)*F*N.dot3(O,T,S))+(s=q<0?0:(q*=q)*q*M.dot3(E,k,L))+(c=$<0?0:($*=$)*$*I.dot3(z,C,P)))},e.perlin2=function(e,t){let n=Math.floor(e),r=Math.floor(t);e-=n,t-=r;const l=i[(n&=255)+o[r&=255]].dot2(e,t),s=i[n+o[r+1]].dot2(e,t-1),a=i[n+1+o[r]].dot2(e-1,t),f=i[n+1+o[r+1]].dot2(e-1,t-1),p=c(e);return u(u(l,a,p),u(s,f,p),c(t))},e.perlin3=function(e,t,n){let r=Math.floor(e),l=Math.floor(t),s=Math.floor(n);e-=r,t-=l,n-=s;const a=i[(r&=255)+o[(l&=255)+o[s&=255]]].dot3(e,t,n),f=i[r+o[l+o[s+1]]].dot3(e,t,n-1),p=i[r+o[l+1+o[s]]].dot3(e,t-1,n),d=i[r+o[l+1+o[s+1]]].dot3(e,t-1,n-1),h=i[r+1+o[l+o[s]]].dot3(e-1,t,n),m=i[r+1+o[l+o[s+1]]].dot3(e-1,t,n-1),v=i[r+1+o[l+1+o[s]]].dot3(e-1,t-1,n),y=i[r+1+o[l+1+o[s+1]]].dot3(e-1,t-1,n-1),g=c(e),b=c(t),x=c(n);return u(u(u(a,h,g),u(f,m,g),x),u(u(p,v,g),u(d,y,g),x),b)},e}},{}],115:[function(e,t,n){const r=e("./perlin/perlin")();r.seed(.5),t.exports=function(e,t){return Math.abs(r.simplex2(e/100,t/100))}},{"./perlin/perlin":114}]},{},[3]);